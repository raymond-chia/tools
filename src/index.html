<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TOML 技能編輯器</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="css/skill-editor.css" />
  </head>
  <body>
    <!-- 頭部導航 -->
    <header class="app-header">
      <div class="header-content">
        <h1 class="app-title">TOML 技能編輯器</h1>
        <nav class="nav-menu">
          <button id="home-btn" class="active">首頁</button>
          <button id="editor-btn">技能編輯</button>
        </nav>
      </div>
    </header>

    <main class="content">
      <!-- 首頁視圖 -->
      <section id="home-view" class="view">
        <div class="welcome-section">
          <h2>歡迎使用 TOML 技能編輯器</h2>
          <p class="description">此工具用於編輯 TOML 格式的遊戲技能資料。</p>

          <div class="features-list">
            <h3>主要功能：</h3>
            <ul>
              <li>載入並顯示技能檔案</li>
              <li>設定技能被動屬性</li>
              <li>保存修改回 TOML 檔案</li>
            </ul>
          </div>

          <button id="start-btn" class="start-button">開始編輯技能</button>
        </div>
      </section>

      <!-- 技能編輯器視圖 -->
      <section id="editor-view" class="view hidden">
        <div class="skill-editor">
          <div class="editor-toolbar">
            <button id="select-file-btn" class="file-button">
              選擇技能檔案
            </button>
            <div id="file-info" class="file-info hidden">
              <span id="current-file" class="current-file"></span>
            </div>
          </div>

          <div id="editor-content" class="editor-content hidden">
            <div id="skill-list" class="skill-list">
              <div class="skill-list-header">
                <div class="skill-list-title">
                  <h3>技能列表</h3>
                  <div id="skill-count" class="skill-count">0 個技能</div>
                </div>
                <button id="new-skill-btn" class="new-skill-button">
                  新增技能
                </button>
              </div>
              <div id="skill-items" class="skill-items"></div>
            </div>

            <div id="skill-detail" class="skill-detail hidden">
              <div class="skill-detail-header">
                <div class="skill-detail-title">
                  <h3>技能詳情</h3>
                  <div id="skill-id" class="skill-id"></div>
                </div>
                <button id="delete-skill-btn" class="delete-button">
                  刪除技能
                </button>
              </div>

              <div class="skill-content">
                <div class="section-title">標籤</div>
                <div class="tags-container">
                  <!-- 主動/被動 二選一 -->
                  <div class="tag-group">
                    <div class="tag-group-title">技能類型：</div>
                    <div class="tag-options">
                      <div class="field tag-field">
                        <input
                          id="tag-active"
                          type="radio"
                          name="active-passive"
                          data-tag="active"
                          class="tag-radio"
                        />
                        <label for="tag-active">主動</label>
                      </div>
                      <div class="field tag-field">
                        <input
                          id="tag-passive"
                          type="radio"
                          name="active-passive"
                          data-tag="passive"
                          class="tag-radio"
                        />
                        <label for="tag-passive">被動</label>
                      </div>
                    </div>
                  </div>

                  <!-- 單體/範圍 二選一 -->
                  <div class="tag-group">
                    <div class="tag-group-title">影響範圍：</div>
                    <div class="tag-options">
                      <div class="field tag-field">
                        <input
                          id="tag-single"
                          type="radio"
                          name="single-area"
                          data-tag="single"
                          class="tag-radio"
                        />
                        <label for="tag-single">單體</label>
                      </div>
                      <div class="field tag-field">
                        <input
                          id="tag-area"
                          type="radio"
                          name="single-area"
                          data-tag="area"
                          class="tag-radio"
                        />
                        <label for="tag-area">範圍</label>
                      </div>
                    </div>
                  </div>

                  <!-- 近戰/遠程 二選一 -->
                  <div class="tag-group">
                    <div class="tag-group-title">攻擊距離：</div>
                    <div class="tag-options">
                      <div class="field tag-field">
                        <input
                          id="tag-melee"
                          type="radio"
                          name="melee-ranged"
                          data-tag="melee"
                          class="tag-radio"
                        />
                        <label for="tag-melee">近戰</label>
                      </div>
                      <div class="field tag-field">
                        <input
                          id="tag-ranged"
                          type="radio"
                          name="melee-ranged"
                          data-tag="ranged"
                          class="tag-radio"
                        />
                        <label for="tag-ranged">遠程</label>
                      </div>
                    </div>
                  </div>

                  <!-- 攻擊/有益 二選一 -->
                  <div class="tag-group">
                    <div class="tag-group-title">效果類型：</div>
                    <div class="tag-options">
                      <div class="field tag-field">
                        <input
                          id="tag-attack"
                          type="radio"
                          name="attack-beneficial"
                          data-tag="attack"
                          class="tag-radio"
                        />
                        <label for="tag-attack">攻擊</label>
                      </div>
                      <div class="field tag-field">
                        <input
                          id="tag-beneficial"
                          type="radio"
                          name="attack-beneficial"
                          data-tag="beneficial"
                          class="tag-radio"
                        />
                        <label for="tag-beneficial">有益</label>
                      </div>
                    </div>
                  </div>

                  <div class="tag-group">
                    <div class="field tag-field">
                      <label for="tag-bodycontrol">身體控制</label>
                      <input
                        id="tag-bodycontrol"
                        type="checkbox"
                        data-tag="bodycontrol"
                        class="tag-checkbox"
                      />
                    </div>
                    <div class="field tag-field">
                      <label for="tag-mindcontrol">精神控制</label>
                      <input
                        id="tag-mindcontrol"
                        type="checkbox"
                        data-tag="mindcontrol"
                        class="tag-checkbox"
                      />
                    </div>
                    <div class="field tag-field">
                      <label for="tag-magic">魔法</label>
                      <input
                        id="tag-magic"
                        type="checkbox"
                        data-tag="magic"
                        class="tag-checkbox"
                      />
                    </div>
                    <div class="field tag-field">
                      <label for="tag-heal">治療</label>
                      <input
                        id="tag-heal"
                        type="checkbox"
                        data-tag="heal"
                        class="tag-checkbox"
                      />
                    </div>
                    <div class="field tag-field">
                      <label for="tag-fire">火焰</label>
                      <input
                        id="tag-fire"
                        type="checkbox"
                        data-tag="fire"
                        class="tag-checkbox"
                      />
                    </div>
                  </div>
                </div>

                <div class="section-title">基本屬性</div>
                <div class="basic-attributes">
                  <div class="field">
                    <label for="skill-range">範圍：</label>
                    <input id="skill-range" type="number" min="0" value="0" />
                  </div>
                  <div class="field">
                    <label for="skill-cost">消耗：</label>
                    <input id="skill-cost" type="number" min="0" value="0" />
                  </div>
                  <div class="field">
                    <label for="skill-hit-rate">命中率：</label>
                    <input
                      id="skill-hit-rate"
                      type="number"
                      min="0"
                      max="100"
                      placeholder="無"
                    />
                  </div>
                  <div class="field">
                    <label for="skill-crit-rate">暴擊率：</label>
                    <input
                      id="skill-crit-rate"
                      type="number"
                      min="0"
                      max="100"
                      placeholder="無"
                    />
                  </div>
                </div>

                <div class="section-title">效果</div>
                <div id="effects-container" class="effects-container">
                  <!-- 效果將通過 JS 動態生成 -->
                </div>
                <div class="effect-buttons">
                  <button id="add-hp-effect" class="add-effect-button">
                    添加 HP 效果
                  </button>
                  <button id="add-burn-effect" class="add-effect-button">
                    添加燃燒效果
                  </button>
                </div>

                <button id="save-btn" class="save-button">保存變更</button>
              </div>
            </div>
          </div>

          <div id="empty-state" class="empty-state">
            <p>請選擇技能檔案以開始編輯</p>
            <p class="instruction">請選擇 <code>skills.toml</code> 檔案</p>
          </div>
        </div>
      </section>
    </main>

    <!-- 確認對話框 -->
    <div id="confirm-dialog" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>確認操作</h3>
        </div>
        <div class="modal-body">
          <p id="confirm-message"></p>
        </div>
        <div class="modal-footer">
          <button id="confirm-cancel-btn" class="btn">取消</button>
          <button id="confirm-ok-btn" class="btn btn-danger">確認</button>
        </div>
      </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/skill-editor.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
